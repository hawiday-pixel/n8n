---
created: 2025-12-06
updated: 2025-12-07
alwaysApply: true
---

# n8n Workflow Management

## Important Concepts

- **n8n has no folders** — workflows are a flat list in n8n
- **Local folders** (`admin/`, `sales/`, etc.) are for local organization only
- **Workflows are matched by `"name"` field** — changing the name creates a new workflow, not an update

## API Access

n8n MCP tools are configured and available. No scripts needed — use MCP tools directly through Cursor.

## Four Types of Work

### 1. Create New Workflow
- Follow naming conventions in `workflow-naming.mdc`
- Filename: `{company}-{short-description}.json`
- Workflow name (JSON): `{COMPANY} | {Category} | {short-description}`
- Place in appropriate category folder under `workflows/`
- Deploy with: `n8n_create_workflow` MCP tool (Cursor reads JSON, sends to n8n)

### 2. Amend/Edit Existing Workflow
- **Export first** to get the latest version from n8n using `n8n_get_workflow`
- Edit the existing JSON file in place
- **Do NOT create a new file** — modify the existing one
- **Do NOT change the `"name"` field** — this will create a duplicate!
- Deploy changes with `n8n_update_full_workflow` MCP tool

### 3. Rename Workflow
- **Do NOT change `"name"` in local JSON** — import will create duplicate
- Use `n8n_update_partial_workflow` with `updateName` operation
- After renaming in n8n, update local JSON filename to match

### 4. Delete Workflow
- **ALWAYS ask for explicit user approval before deleting**
- Use `n8n_delete_workflow` MCP tool
- Never delete without confirmation

## MCP Tool Reference

| MCP Tool | Purpose |
|----------|---------|
| `n8n_list_workflows` | List all workflows (metadata only) |
| `n8n_get_workflow` | Get full workflow JSON by ID |
| `n8n_create_workflow` | Create new workflow in n8n |
| `n8n_update_full_workflow` | Update existing workflow (full replacement) |
| `n8n_update_partial_workflow` | Incremental updates (rename, activate, add nodes) |
| `n8n_delete_workflow` | Delete workflow (requires user confirmation) |
| `n8n_validate_workflow` | Validate workflow by ID |
| `n8n_autofix_workflow` | Auto-fix common validation errors |

## Standard Workflow

1. **Export**: Use `n8n_list_workflows` + `n8n_get_workflow` to sync from n8n
2. **Edit**: Modify JSON file(s) as needed
3. **Deploy**: Use `n8n_update_full_workflow` or `n8n_create_workflow`

## Common Operations

### Export a workflow
```
Ask Cursor: "Export workflow ID xyz to workflows/admin/"
→ Uses n8n_get_workflow, writes to local file
```

### Deploy a workflow
```
Ask Cursor: "Deploy workflows/admin/tner-email-classifier.json to n8n"
→ Reads local file, uses n8n_create_workflow or n8n_update_full_workflow
```

### Rename a workflow
```
Ask Cursor: "Rename workflow 'OLD NAME' to 'NEW NAME'"
→ Uses n8n_update_partial_workflow with updateName operation
```

### Activate/Deactivate
```
Ask Cursor: "Activate workflow ID xyz"
→ Uses n8n_update_partial_workflow with activateWorkflow operation
```

## Rules

- **Do not ask for API credentials** — MCP tools are pre-configured
- **Never change `"name"` field directly in JSON** — use MCP rename instead
- Match existing workflows by the `"name"` field in JSON
- Use `n8n_health_check` to verify API connectivity if issues occur
